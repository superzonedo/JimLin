# LabelX Onboarding 問卷更新說明

## 📊 更新摘要
問卷從 **7 步驟** 擴展為 **10 步驟**，重新設計了步驟 3-5，聚焦於用戶的食品安全意識。

---

## 🔄 新的問卷流程（10 步驟）

### 步驟 1/10：食品安全意識
**問題：** 我不太在意食品安全？  
**選項：**
- 是的，我不太在意
- 否，我非常在意食品安全

### 步驟 2/10：飲食標籤關注程度  
**問題：** 您平常對食品標籤的關注程度？  
**選項：**
1. 總是仔細閱讀所有成分
2. 偶爾會看營養標示
3. 只注意過敏原資訊
4. 只看熱量和保存期限
5. 很少注意標籤內容
6. 完全不看食品標籤

### 步驟 3/10：人工色素或防腐劑 ✨ **新增**
**問題：** 我不太在意人工色素或防腐劑  
**圖標：** 🎨 (color-palette-outline)  
**選項：**
1. 否，我很在意
2. 是，我不太在意

### 步驟 4/10：標籤理解度 ✨ **新增**
**問題：** 標籤內容也看不懂，我不會想太多  
**圖標：** 👓 (glasses-outline)  
**選項：**
1. 否，我會仔細研究
2. 是，我不會想太多

### 步驟 5/10：癌症風險意識 ✨ **新增**
**問題：** 我不擔心添加劑造成癌症風險  
**圖標：** ⚠️ (warning-outline)  
**選項：**
1. 否，我很擔心
2. 是，我不擔心

### 步驟 6/10：過敏原（原步驟 3）
**問題：** 我沒有過敏原？  
**選項：** （多選）
- 是的，我沒有過敏原
- 堅果類
- 花生
- 海鮮
- 乳製品
- 蛋類
- 大豆
- 小麥/麩質
- 芝麻

### 步驟 7/10：健康目標（原步驟 4）
**問題：** 您的健康目標是什麼？  
**選項：** （多選）
- 維持健康體重
- 改善心血管健康
- 控制血糖
- 降低鈉攝取
- 增加纖維攝取
- 增加蛋白質
- 改善腸胃健康

### 步驟 8/10：健康狀況（原步驟 5）
**問題：** 您是否有以下健康狀況？  
**選項：** （多選）
- 沒有特殊健康狀況
- 糖尿病
- 高血壓
- 高膽固醇
- 腎臟疾病
- 肝臟疾病
- 腸胃敏感
- 代謝疾病

### 步驟 9/10：家庭成員（原步驟 6）
**問題：** 您心裡最在意誰的健康？  
**選項：** （多選）
- 只有自己
- 伴侶
- 嬰幼兒 (0-3歲)
- 學齡兒童 (4-12歲)
- 青少年 (13-18歲)
- 長輩 (65歲以上)
- 孕婦

### 步驟 10/10：基本資料（原步驟 7）
**問題 A：** 您的性別是？
- 男性、女性、其他、不願透露

**問題 B：** 您的年齡層是？
- 18-25歲、26-35歲、36-45歲、46-55歲、56歲以上

---

## 🔧 技術變更

### 資料結構更新
```typescript
interface Answers {
  careAboutFoodSafety: boolean | null;     // 步驟 1
  dietAwareness: string | null;            // 步驟 2
  careAboutAdditives: boolean | null;      // 步驟 3 ✨ 新增
  understandLabels: boolean | null;        // 步驟 4 ✨ 新增
  worryAboutCancer: boolean | null;        // 步驟 5 ✨ 新增
  allergens: (AllergenType | "none")[];    // 步驟 6
  healthGoals: HealthGoal[];               // 步驟 7
  diseases: (DiseaseType | "none")[];      // 步驟 8
  familyMembers: string[];                 // 步驟 9
  gender: string | null;                   // 步驟 10A
  ageGroup: string | null;                 // 步驟 10B
}
```

### 進度條更新
- 從 `1/7` 更新為 `1/10`
- 進度計算：`(currentStep) / 10`

### 新增的問題設計
1. **統一樣式**：所有新問題都使用上下排列的大按鈕（`variant="large"`）
2. **一致的邏輯**：選項 1 = 否（在意/會研究/擔心），選項 2 = 是（不在意/不研究/不擔心）
3. **清晰的圖標**：
   - 步驟 3：🎨 調色盤（人工色素）
   - 步驟 4：👓 眼鏡（閱讀理解）
   - 步驟 5：⚠️ 警告（風險意識）

---

## 📱 用戶體驗改進

### 問卷目的更聚焦
新增的 3 個問題幫助我們了解用戶的：
1. **添加劑敏感度**（步驟 3）
2. **標籤理解能力**（步驟 4）
3. **健康風險意識**（步驟 5）

這些資訊可以用於：
- 個性化掃描結果
- 調整警告敏感度
- 提供適合的教育內容

### 視覺一致性
- 所有是/否問題使用相同的按鈕樣式
- 按鈕從上到下排列（更適合單手操作）
- 圖標和顏色與問題主題相關

---

## 🧪 測試要點

1. ✅ 所有 10 個步驟都可以正常導航
2. ✅ 進度條正確顯示 `步驟 X / 10`
3. ✅ 新增的 3 個問題都需要回答才能進入下一步
4. ✅ 最後一步顯示「完成」按鈕
5. ✅ 答案正確傳遞到 Complete 畫面
6. ✅ 資料正確保存到 Zustand 和 Supabase

---

## 📝 注意事項

### 資料庫遷移
如果 Supabase 尚未更新 schema，需要添加新欄位：
```sql
ALTER TABLE profiles
ADD COLUMN care_about_additives BOOLEAN,
ADD COLUMN understand_labels BOOLEAN,
ADD COLUMN worry_about_cancer BOOLEAN;
```

### 完成畫面處理
`OnboardingCompleteScreen.tsx` 需要處理新的 3 個欄位，將其保存到 `onboardingData`。

---

## 🎯 下一步建議

1. **資料分析**：利用新收集的資料個性化用戶體驗
2. **動態內容**：根據用戶的意識水平提供不同深度的解釋
3. **教育模式**：為「看不懂標籤」的用戶提供教學內容
4. **風險提示**：為擔心癌症風險的用戶強化警告訊息
